)
remotes::install_github(
"tpemartin/econDV"
)
remotes::install_github(
"tpemartin/econDV" ,
force = TRUE
)
remotes::install_github(
"tpemartin/econDV" ,
force = TRUE
)
detach("package:dplyr", unload = TRUE)
remotes::install_github(
"tpemartin/econDV" ,
force = TRUE
)
remove.packages("dplyr", lib="~/R/win-library/4.0")
remotes::install_github(
"tpemartin/econDV" ,
force = TRUE
)
library(econDV)
init_courseSetup()
library(econDV)
library(drake)
library(devtools)
library(remotes)
remotes::install_github("tpemartin/rmd2drake", force=T)
remove.packages("drake", lib="~/R/win-library/4.0")
install.packages("drake")
install.packages("drake")
library(drake)
remotes::install_github("tpemartin/rmd2drake", force=T)
rmd2drake:::visActiveRmd_plan()
rmd2drake:::visActiveRmd_plan()
save_ggplot = {
ggsave(
plot=ggPopulayionTrend,
filename=file.path(imageFolder, "homework02.svg" ),
width = 8,
height = 5
)
}
save_ggplot = {
ggsave(
plot=ggPopulayionTrend,
filename=file.path(imageFolder, "homework02.svg" ),
width = 8,
height = 5
)
}
install.packages("svglite")
library(svglite)
knitr::opts_chunk$set(echo = TRUE, eval=F)
library(drake)
library(econDV)
library(dplyr)
library(dplyr)
library(tidyr)
library(stringr)
library(googledrive)
library(readr)
library(ggplot2)
library(econDV)
econDV::setup_chinese(need2Knit = F)
library(dplyr)
library(tidyr)
library(stringr)
library(googledrive)
library(readr)
library(ggplot2)
library(econDV)
font_families_google() %>%
stringr::str_subset(regex("noto", ignore_case = T))
font_add_google("Noto Sans TC")
rprojroot::is_rstudio_project -> .pj
.pj$make_fix_file() -> .root
imageFolder <- file.path(.root(),"img")
dataFolder <- file.path(.root(),"data")
if(!dir.exists(imageFolder)) dir.create(imageFolder)
if(!dir.exists(dataFolder)) dir.create(dataFolder)
xfun::download_file("https://www.dropbox.com/s/7b3nbgfx5bgft8g/drake_annotationmaps.Rdata?dl=1")
load("drake_annotationmaps.Rdata")
xfun::download_file("https://www.dropbox.com/s/7b3nbgfx5bgft8g/drake_annotationmaps.Rdata?dl=1")
load("drake_annotationmaps.Rdata")
rprojroot::is_rstudio_project -> .pj
.pj$make_fix_file() -> .root
imageFolder <- file.path(.root(),"img")
dataFolder <- file.path(.root(),"data")
if(!dir.exists(imageFolder)) dir.create(imageFolder)
if(!dir.exists(dataFolder)) dir.create(dataFolder)
xfun::download_file("https://www.dropbox.com/s/7b3nbgfx5bgft8g/drake_annotationmaps.Rdata?dl=1")
load("drake_annotationmaps.Rdata")
remotes::install_github(
"tpemartin/econDV",
force =T
)
remotes::install_github(
"tpemartin/econDV",1
force =T
)
remotes::install_github(
"tpemartin/econDV",1
force =T
)
remotes::install_github(
"tpemartin/econDV",1
force =T)
remotes::install_github(
"tpemartin/econDV", force =T)
detach("package:dplyr", unload = TRUE)
remove.packages("dplyr", lib="~/R/win-library/4.0")
detach("package:econDV", unload = TRUE)
remove.packages("econDV", lib="~/R/win-library/4.0")
.ghToken="cef19342f50cc7fc4cc56e685f1543d99f88d70b"
install.packages("devtools")
install.packages("remotes")
remotes::install_github(
"tpemartin/econDV" ,
force = TRUE
)
library(econDV)
init_courseSetup()
install.packages("remotes")
remotes::install_github(
"tpemartin/econDV", force =T)
library(backports)
detach("package:backports", unload = TRUE)
remotes::install_github("tpemartin/econDV", force =T)
remotes::install_github("tpemartin/econDV", force =T)
remotes::install_github("tpemartin/econDV", force =T)
library(dplyr)
library(tidyr)
library(stringr)
library(googledrive)
library(readr)
library(ggplot2)
library(econDV)
rprojroot::is_rstudio_project -> .pj
.pj$make_fix_file() -> .root
imageFolder <- file.path(.root(),"img")
dataFolder <- file.path(.root(),"data")
if(!dir.exists(imageFolder)) dir.create(imageFolder)
if(!dir.exists(dataFolder)) dir.create(dataFolder)
xfun::download_file("https://www.dropbox.com/s/7b3nbgfx5bgft8g/drake_annotationmaps.Rdata?dl=1")
load("drake_annotationmaps.Rdata")
load("C:/Users/tonyf/Desktop/drake_annotationmaps.Rdata")
drake$source_plan()
drake$loadTarget$mpoly()
drake$source_plan()
drake$source_plan()
library(sf)
install.packages(sf)
install.packages(sf)
install.packages("sf")
library(sf)
dsf_taiwan <-
sf::read_sf("C:\Users\tonyf\Documents\GitHub\109-1-econDV\drake\新增資料夾")
dsf_taiwan <-
sf::read_sf("\Users\tonyf\Documents\GitHub\109-1-econDV\drake\新增資料夾")
dsf_taiwan <-
sf::read_sf("\tonyf\Documents\GitHub\109-1-econDV\drake\新增資料夾")
dsf_taiwan <-
sf::read_sf(C:\Users\tonyf\Documents\GitHub\109-1-econDV\drake\新增資料夾)
dsf_taiwan <-
sf::read_sf("C:\Users\tonyf\Documents\GitHub\109-1-econDV\drake\新增資料夾")
dsf_taiwan <-
sf::read_sf("C:\Users\tonyf\Documents\GitHub\109-1-econDV\drake\新增資料夾",header = T)
dsf_taiwan <-
sf::read_sf("C:/Users/tonyf/Documents/GitHub/109-1-econDV/drake/新增資料夾")
object.size(dsf_taiwan)
View(dsf_taiwan)
object.size(dsf_taiwan)
dsf_taiwan %>%
ggplot() +
geom_sf()
library(ggplot2)
dsf_taiwan %>%
ggplot() +
geom_sf()
dsf_taiwan %>%
ggplot() +
geom_sf()
install.packages("rmapshaper")
debug(drake$source_plan)
drake$source_plan()
debug(drake$source_plan)
drake$source_plan()
dsf_taiwan_simplify %>%
st_crop(c(xmin=119,xmax=122,ymin=22,ymax=25.8)) -> dsf_taiwanCropped
dsf_taiwan %>%
st_crop(c(xmin=119,xmax=122,ymin=22,ymax=25.8)) -> dsf_taiwanCropped
dsf_taiwan_simplify %>%
ggplot()+geom_sf()
dsf_taiwan %>%
rmapshaper::ms_simplify() -> dsf_taiwan_simplify
dsf_taiwan_simplify %>%
ggplot()+geom_sf()
dsf_taiwan_simplify %>%
st_crop(c(xmin=119,xmax=122,ymin=22,ymax=25.8)) -> dsf_taiwanCropped
dsf_taiwan %>%
rmapshaper::ms_simplify() -> dsf_taiwan_simplify
dsf_taiwan_simplify %>%
ggplot()+geom_sf()
dsf_taiwan_simplify %>%
st_crop(c(xmin=119,xmax=122,ymin=22,ymax=25.8)) -> dsf_taiwanCropped
dsf_taiwan_simplify %>%
st_crop(c(xmin=119,xmax=122,ymin=22,ymax=25.8)) -> dsf_taiwanCropped
dsf_taiwanCropped %>%
ggplot()+geom_sf()
dsf_taiwanCropped %>%
filter(
stringr::str_detect(COUNTYNAME, "宜|北|基")
) %>%
ggplot() +
geom_sf()
dsf_taiwanCropped %>%
filter(
stringr::str_detect(COUNTYNAME, "宜|北|基")
) %>%
ggplot() +
geom_sf()
dsf_taiwanCropped %>%
filter(
stringr::str_detect(COUNTYNAME, "宜|北|基")
) %>%
ggplot() +
geom_sf()
dsf_taiwanCropped %>%
filter(
stringr::str_detect(COUNTYNAME, "宜|北|基")
) %>%
ggplot() +
geom_sf()
dsf_taiwanCropped %>%
filter(
stringr::str_detect(COUNTYNAME, "宜|北|基")
) %>%
ggplot() +
geom_sf()
dsf_taiwanCropped %>%
filter(
stringr::str_detect(COUNTYNAME, "宜|北|基")
) %>%
ggplot() +
geom_sf()
dsf_taiwanCropped %>%
filter(
stringr::str_detect(COUNTYNAME, "宜|北|基")
) %>%
ggplot() +
geom_sf()
dsf_taiwanCropped %>%
filter(
stringr::str_detect(COUNTYNAME, "宜|北|基")
) %>%
ggplot() +
geom_sf()
dsf_taiwanCropped %>%
filter(
stringr::str_detect(COUNTYNAME, "宜|北|基")
) %>%
ggplot() +
geom_sf()
dsf_taiwanCropped %>%
filter(
stringr::str_detect(COUNTYNAME, "宜|北|基")
) %>%
ggplot() +
geom_sf()
dsf_taiwanCropped %>%
filter(
stringr::str_detect(COUNTYNAME, "宜|北|基")
) %>%
ggplot() +
geom_sf()
dsf_taiwanCropped %>%
filter(
stringr::str_detect(COUNTYNAME, "宜|北|基")
) %>%
ggplot() +
geom_sf()
dsf_taiwanCropped %>%
ggplot()+geom_sf()
dsf_taiwanCropped %>%
filter(
stringr::str_detect(COUNTYNAME, "宜|北|基")
)
dsf_taiwanCropped %>%
filter(
stringr::str_detect(COUNTYNAME, "宜|北|基")
) %>%
ggplot() +
geom_sf()
str(dsf_taiwanCropped)
filter(
stringr::str_detect(COUNTYNAME, "宜蘭|北|基")
)
dsf_taiwanCropped %>%
filter(
stringr::str_detect(COUNTYNAME, "宜蘭|北|基")
)
stringr::str_detect(COUNTYNAME, "宜蘭|北|基", force = T
dsf_taiwanCropped %>%
filter(
stringr::str_detect(COUNTYNAME, "宜蘭|北|基", force = T
)
dsf_taiwanCropped %>%
filter(
stringr::str_detect(COUNTYNAME, "宜蘭|北|基", force = TRUE )
stringr::str_replace(
drake$process2get$storr_rdsOptions,
"(?<=(storr_rds\())[\"[:graph:]]+(?=,)",
'file.path(.root(),".map")'
) -> drake$process2get$storr_rdsOptions
drake$activeRmd$frontmatter$drake_cache <- file.path(.root(),".map")
drake$makePlan()
library(rmd2drake)
drake$makePlan()
stringr::str_replace(
drake$process2get$storr_rdsOptions,
"(?<=(storr_rds\())[\"[:graph:]]+(?=,)",
'file.path(.root(),".map")'
) -> drake$process2get$storr_rdsOptions
stringr::str_replace(
drake$process2get$storr_rdsOptions,
"(?<=(storr_rds\())[\"[:graph:]]+(?=,)",
'file.path(.root(),".map")'
) -> drake$process2get$storr_rdsOptions
stringr::str_replace(
drake$process2get$storr_rdsOptions,
"(?<=(storr_rds\())[\"[:graph:]]+(?=,)",
'file.path(.root(),".map")'
) -> drake$process2get$storr_rdsOptions
drake$activeRmd$frontmatter$drake_cache <- file.path(.root(),".map")
stringr::str_replace(
drake$process2get$storr_rdsOptions,
"(?<=(storr_rds\\())[\"[:graph:]]+(?=,)",
'file.path(.root(),".map")'
) -> drake$process2get$storr_rdsOptions
drake$activeRmd$frontmatter$drake_cache <- file.path(.root(),".map")
drake$makePlan()
drake$source_plan()
drake$source_plan()
stringr::str_replace(
drake$process2get$storr_rdsOptions,
"(?<=(storr_rds\\())[\"[:graph:]]+(?=,)",
'file.path(.root(),".map")'
) -> drake$process2get$storr_rdsOptions
drake$activeRmd$frontmatter$drake_cache <- file.path(.root(),".map")
drake$source_plan()
drake$makePlan()
library(dplyr)
drake$makePlan()
library(rmapshaper)
drake$makePlan()
library(sf)
drake$makePlan()
dsf_taiwan <-
sf::read_sf("C:/Users/tonyf/Documents/GitHub/109-1-econDV/drake/新增資料夾")
dsf_taiwan %>%
rmapshaper::ms_simplify() -> dsf_taiwan_simplify
xfun::download_file("https://www.dropbox.com/s/7b3nbgfx5bgft8g/drake_annotationmaps.Rdata?dl=1")
load("drake_annotationmaps.Rdata")
stringr::str_replace(
drake$process2get$storr_rdsOptions,
"(?<=(storr_rds\\())[\"[:graph:]]+(?=,)",
'file.path(.root(),".map")'
) -> drake$process2get$storr_rdsOptions
drake$activeRmd$frontmatter$drake_cache <- file.path(.root(),".map")
load("drake_annotationmaps.Rdata")
load("C:\Users\tonyf\Desktop\drake_annotationmaps.Rdata")
load("C:/Users/tonyf/Desktop/drake_annotationmaps.Rdata")
stringr::str_replace(
drake$process2get$storr_rdsOptions,
"(?<=(storr_rds\\())[\"[:graph:]]+(?=,)",
'file.path(.root(),".map")'
) -> drake$process2get$storr_rdsOptions
drake$activeRmd$frontmatter$drake_cache <- file.path(.root(),".map")
library(dplyr)
library(tidyr)
library(stringr)
library(googledrive)
library(readr)
library(ggmap)
library(osmdata)
library(ggplot2)
library(econDV)
library(sf)
stringr::str_replace(
drake$process2get$storr_rdsOptions,
"(?<=(storr_rds\\())[\"[:graph:]]+(?=,)",
'file.path(.root(),".map")'
) -> drake$process2get$storr_rdsOptions
drake$activeRmd$frontmatter$drake_cache <- file.path(.root(),".map")
```
.root()
drake$source_plan()
install.packages("roots")
library(roots)
drake$source_plan()
stringr::str_replace(
drake$process2get$storr_rdsOptions,
"(?<=(storr_rds\\())[\"[:graph:]]+(?=,)",
'file.path(.root(),".map")'
) -> drake$process2get$storr_rdsOptions
drake$activeRmd$frontmatter$drake_cache <- file.path(.root(),".map")
library("osmdata")
install.packages("osmdata")
library("osmdata")
osmdata::getbb("new taipei") -> newTaipeiBBox
dsf_newTaipei <- opq(newTaipeiBBox) %>%
add_osm_feature(key="admin_level", value="5") %>%
osmdata::osmdata_sf()
newTaipeiBBox
stringr::str_subset(osmdata::available_features(), "boundary|admin")
osmdata::getbb("new taipei") -> newTaipeiBBox
dsf_newTaipei <- opq(newTaipeiBBox) %>%
add_osm_feature(key="admin_level", value="5") %>%
osmdata::osmdata_sf()
dsf_newTaipei %>%
filter(
stringr::str_detect(name, "土|三峽|板")
) %>% ggplot2::ggplot()+ggplot2::geom_sf()
library(ggplot2)
library(ggmap)
dsf_newTaipei %>%
filter(
stringr::str_detect(name, "土|三峽|板")
) %>% ggplot()+ geom_sf()
dsf_newTaipei %>%
filter(
stringr::str_detect(name, "土|峽|板")
) %>% ggplot()+ geom_sf()
dsf_newTaipei %>%
filter(
stringr::str_detect(name, "土|峽|板")
) %>% ggplot()+ geom_sf()
dsf_newTaipei$osm_multipolygons %>%
osm_geom_rename() %>% # 多插這一行
ggplot()+
geom_sf(
aes(fill=name),
color="white", size=0.2
)+
colorspace::scale_fill_discrete_qualitative()+
theme_void()
dsf_newTaipei$osm_multipolygons %>%
ggplot()+
geom_sf()
xfun::download_file("https://www.dropbox.com/s/8ndtvzqbdb4cb93/data_visulaization_pk.R?dl=1")
source("data_visulaization_pk.R", encoding = "UTF-8")
dsf_newTaipei$osm_multipolygons %>%
osm_geom_rename() %>% # 多插這一行
ggplot()+
geom_sf(
aes(fill=name),
color="white", size=0.2
)+
colorspace::scale_fill_discrete_qualitative()+
theme_void()
dsf_newTaipei$osm_multipolygons %>%
osm_geom_rename() %>% # 多插這一行
ggplot()+
geom_sf(
aes(fill=name),
color="white", size=0.2
)+
colorspace::scale_fill_discrete_qualitative()+
theme_void()
dsf_newTaipei$osm_multipolygons %>%
osm_geom_rename() %>% # 多插這一行
ggplot()+
geom_sf(
aes(fill=name),
color="white", size=0.2
)+
colorspace::scale_fill_discrete_qualitative()+
theme_void()
dsf_newTaipei$osm_multipolygons %>%
osm_geom_rename() %>% # 多插這一行
ggplot()+
geom_sf(
aes(fill=name),
color="white", size=0.2
)+
colorspace::scale_fill_discrete_qualitative()+
theme_void()
dsf_newTaipei$osm_multipolygons %>%
osm_geom_rename()
library(dplyr)
library(tidyr)
library(stringr)
library(googledrive)
library(readr)
library(ggmap)
library(osmdata)
library(ggplot2)
library(econDV)
library(sf)
dsf_newTaipei$osm_multipolygons %>%
osm_geom_rename() %>% # 多插這一行
ggplot()+
geom_sf(
aes(fill=name),
color="white", size=0.2
)+
colorspace::scale_fill_discrete_qualitative()+
theme_void()
osmdata::getbb("new taipei") -> newTaipeiBBox
newTaipeiBBox
