library(dplyr)
library(tidyr)
library(stringr)
library(googledrive)
library(readr)
library(ggplot2)
library(econDV)
rprojroot::is_rstudio_project -> .pj
.pj$make_fix_file() -> .root
imageFolder <- file.path(.root(),"img")
dataFolder <- file.path(.root(),"data")
if(!dir.exists(imageFolder)) dir.create(imageFolder)
if(!dir.exists(dataFolder)) dir.create(dataFolder)
income <- fromJSON("https://quality.data.gov.tw/dq_download_json.php?nid=44218&md5_url=5108938196a413ee42cca40b2e599084")
ggpath <- {
canvas +
geom_point(
mapping =  aes(x = `年`, y = `國內生產毛額GDP.名目值.百萬元.`  ),
subset_of_income
)
}
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE, eval=F)
library(drake)
library(econDV)
library(dplyr)
font_families_google() %>%
stringr::str_subset(regex("noto", ignore_case = T))
font_add_google("Noto Sans TC")
# Chunk 2: makecondition
library(dplyr)
library(tidyr)
library(stringr)
library(googledrive)
library(readr)
library(ggplot2)
library(econDV)
library(jsonlite)
rprojroot::is_rstudio_project -> .pj
.pj$make_fix_file() -> .root
imageFolder <- file.path(.root(),"img")
dataFolder <- file.path(.root(),"data")
if(!dir.exists(imageFolder)) dir.create(imageFolder)
if(!dir.exists(dataFolder)) dir.create(dataFolder)
# Chunk 3: datadownload
income <- fromJSON("https://quality.data.gov.tw/dq_download_json.php?nid=44218&md5_url=5108938196a413ee42cca40b2e599084")
# Chunk 4: myggplot
myggplot = {
canvas ={
ggplot()
}
}
# Chunk 5: subset_of_income
{
income$Item_VALUE <- as.integer(income$Item_VALUE)
pick <- income$Item == "國內生產毛額GDP(名目值，百萬元)" & income$TYPE == "原始值"
Item_VALUE <- income$Item_VALUE[pick]
TIME_PERIOD <- income$TIME_PERIOD[pick]
subset_of_income <- data.frame(
`年` = TIME_PERIOD ,
`國內生產毛額GDP(名目值，百萬元)` = Item_VALUE
)
}
# Chunk 6: ggpath
ggpath <- {
canvas +
geom_point(
mapping =  aes(x = `年`, y = `國內生產毛額GDP.名目值.百萬元.`  ),
subset_of_income
)
}
# Chunk 7
# Chunk 8
# Chunk 9
# Chunk 10: save_ggplot
save_ggplot = {
ggsave(
plot=myggplot,
filename=file.path(imageFolder, "myPlot.svg"),
width = 8,
height = 5
)
}
ggpath
ggline <-{
canvas +
geom_line(
aes(x = `年`, y = `國內生產毛額GDP.名目值.百萬元.`  ),
subset_of_income
)
}
ggpath <- {
ggline +
geom_point(
mapping =  aes(x = `年`, y = `國內生產毛額GDP.名目值.百萬元.`  ),
subset_of_income
)
}
ggline
ggpath
geom_path(lineend="butt", linejoin="round", linemitre=1, mapping =  aes(x = `年`, y = `國內生產毛額GDP.名目值.百萬元.`  ),
subset_of_income)
geom_path(lineend="butt", linejoin="round", linemitre=1, mapping =  aes(x = `年`, y = `國內生產毛額GDP.名目值.百萬元.`  ),
subset_of_income) -> test
tets
test
{myggplot+
geom_path(lineend="butt", linejoin="round", linemitre=1, mapping =  aes(x = `年`, y = `國內生產毛額GDP.名目值.百萬元.`  ),
subset_of_income)
}-> test
test
ggpath <- {
myggplot +
geom_point(
mapping =  aes(x = `年`, y = `國內生產毛額GDP.名目值.百萬元.`  ),
subset_of_income
)
}
ggpath
