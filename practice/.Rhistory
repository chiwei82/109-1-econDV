price <- c("$10.000,23", "$999,15", "n/a")
parse_number(price,
na="n/a",
locale=locale(decimal_mark = ",", grouping_mark = "."))
install.packages(library)
install.packages(Library)
install.packages("librarian")
library(librarian)
price <- c("$10.000,23", "$999,15", "n/a")
parse_number(price,
na="n/a",
locale=locale(decimal_mark = ",", grouping_mark = "."))
detach("package:librarian", unload = TRUE)
{
startSalary %>% map(class)
# 以字串形式觀察原始資料以理解na註記形式
startSalary %>%
map(
~parse_character(as.character(.x))
)
# 去除34-36行
startSalary %>%
slice(
1:33
) -> startSalary2
# 設定class
startSalary2 %>%
mutate(
across(
`高級中等(高中、高職)`:大學,
~parse_number(as.character(.x), na="...")
)
) -> startSalary3
# 改變數名稱
startSalary3 %>%
rename(
year=`...1`
)
}
startSalary %>% map(class)
{
startSalary %>% map(class)
# 以字串形式觀察原始資料以理解na註記形式
startSalary %>%
map(
~parse_character(as.character(.x))
)
# 去除34-36行
startSalary %>%
slice(
1:33
) -> startSalary2
# 設定class
startSalary2 %>%
mutate(
across(
`高級中等(高中、高職)`:大學,
~parse_number(as.character(.x), na="...")
)
) -> startSalary3
# 改變數名稱
startSalary3 %>%
rename(
year=`...1`
)
}
{
library(googlesheets4)
library(econDV)
startSalary %=% read_sheet(
"https://docs.google.com/spreadsheets/d/1PPWeFGqedVsgZmV81MeA0oJDCBkj5upkHltlWap7xUY/edit#gid=1835013852",
skip = 3
)
world_inflation %=% WDI::WDI(
indicator = "FP.CPI.TOTL.ZG"
)
df_cpiTW %=% {
con <- url("https://www.dropbox.com/s/8585yr3t0bbcb5b/df_cpiTW.rda?dl=1")
load(file = con)
df_cpiTW
}
df_newTaipeiYouBike %=% jsonlite::fromJSON(
"https://data.ntpc.gov.tw/api/datasets/71CD1490-A2DF-4198-BEF1-318479775E8A/json"
) # data.frame class
drake::make(plan_dataCleaning)
}
library(stringr)
knitr::opts_chunk$set(echo = TRUE, eval=F)
library(drake)
library(econDV)
library(dplyr)
# 不同plan, new_cache裡的名字要不同
cacheNew <- drake::new_cache('.cachename')
options(rstudio_drake_cache = cacheNew$storr)
purlActiveRmd_thenPlanMake()
